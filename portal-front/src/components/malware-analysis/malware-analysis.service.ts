import 'client-only';
import { useLazyLoadQuery, useRefetchableFragment } from 'react-relay';
import { malwareAnalysisList_malwareAnalysis$key } from '../../../__generated__/malwareAnalysisList_malwareAnalysis.graphql';
import {
  MalwareAnalysisOrdering,
  OrderingMode,
} from '../../../__generated__/MalwareAnalysisPaginationQuery.graphql';
import { malwareAnalysisQuery } from '../../../__generated__/malwareAnalysisQuery.graphql';
import {
  malwareAnalysisListFragment,
  malwareAnalysisLoaderQuery,
} from './malware-analysis.graphql';

export const getMalwareAnalysis = (
  count: number = 50,
  orderBy: MalwareAnalysisOrdering = 'created_at',
  orderMode: OrderingMode = 'desc'
) => {
  const subscriptionData = useLazyLoadQuery<malwareAnalysisQuery>(
    malwareAnalysisLoaderQuery,
    {
      count,
      orderBy,
      orderMode,
    }
  );
  return useRefetchableFragment<
    malwareAnalysisQuery,
    malwareAnalysisList_malwareAnalysis$key
  >(malwareAnalysisListFragment, subscriptionData);
};
